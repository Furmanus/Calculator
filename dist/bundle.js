!function(Q){var U={};function F(B){if(U[B])return U[B].exports;var c=U[B]={i:B,l:!1,exports:{}};return Q[B].call(c.exports,c,c.exports,F),c.l=!0,c.exports}F.m=Q,F.c=U,F.d=function(Q,U,B){F.o(Q,U)||Object.defineProperty(Q,U,{configurable:!1,enumerable:!0,get:B})},F.r=function(Q){Object.defineProperty(Q,"__esModule",{value:!0})},F.n=function(Q){var U=Q&&Q.__esModule?function(){return Q.default}:function(){return Q};return F.d(U,"a",U),U},F.o=function(Q,U){return Object.prototype.hasOwnProperty.call(Q,U)},F.p="",F(F.s=8)}([function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return EventEnum; });\nvar EventEnum;\r\n(function (EventEnum) {\r\n    EventEnum["CALCULATOR_BUTTON_CLICKED"] = "calculator_button_clicked";\r\n    EventEnum["CALCULATOR_CANCEL_CLICKED"] = "calculator_cancel_clicked";\r\n    EventEnum["CALCULATOR_EQUAL_CLICKED"] = "calculator_equal_clicked";\r\n    EventEnum["CALCULATOR_MODEL_UPDATED"] = "calculator_model_updated";\r\n    EventEnum["CALCULATOR_MODEL_RESET"] = "calculator_model_reset";\r\n    EventEnum["CALCULATOR_MODEL_SCORE_CALCULATED"] = "calculator_model_score_calculated";\r\n    EventEnum["CALCULATOR_SPECIAL_FUNCTION_CLICKED"] = "calculator_special_function_clicked";\r\n})(EventEnum || (EventEnum = {}));\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvZW51bXMvZXZlbnRfZW51bXMudHM/MjYwNyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBWSxTQVFYO0FBUkQsV0FBWSxTQUFTO0lBQ2pCLG9FQUF1RDtJQUN2RCxvRUFBdUQ7SUFDdkQsa0VBQXFEO0lBQ3JELGtFQUFxRDtJQUNyRCw4REFBaUQ7SUFDakQsb0ZBQXVFO0lBQ3ZFLHdGQUEyRTtBQUMvRSxDQUFDLEVBUlcsU0FBUyxLQUFULFNBQVMsUUFRcEIiLCJmaWxlIjoiMC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBlbnVtIEV2ZW50RW51bSB7XHJcbiAgICBDQUxDVUxBVE9SX0JVVFRPTl9DTElDS0VEID0gJ2NhbGN1bGF0b3JfYnV0dG9uX2NsaWNrZWQnLFxyXG4gICAgQ0FMQ1VMQVRPUl9DQU5DRUxfQ0xJQ0tFRCA9ICdjYWxjdWxhdG9yX2NhbmNlbF9jbGlja2VkJyxcclxuICAgIENBTENVTEFUT1JfRVFVQUxfQ0xJQ0tFRCA9ICdjYWxjdWxhdG9yX2VxdWFsX2NsaWNrZWQnLFxyXG4gICAgQ0FMQ1VMQVRPUl9NT0RFTF9VUERBVEVEID0gJ2NhbGN1bGF0b3JfbW9kZWxfdXBkYXRlZCcsXHJcbiAgICBDQUxDVUxBVE9SX01PREVMX1JFU0VUID0gJ2NhbGN1bGF0b3JfbW9kZWxfcmVzZXQnLFxyXG4gICAgQ0FMQ1VMQVRPUl9NT0RFTF9TQ09SRV9DQUxDVUxBVEVEID0gJ2NhbGN1bGF0b3JfbW9kZWxfc2NvcmVfY2FsY3VsYXRlZCcsXHJcbiAgICBDQUxDVUxBVE9SX1NQRUNJQUxfRlVOQ1RJT05fQ0xJQ0tFRCA9ICdjYWxjdWxhdG9yX3NwZWNpYWxfZnVuY3Rpb25fY2xpY2tlZCdcclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///0\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return specialFunctions; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return specialFunctionFromMath; });\nconst specialFunctions = {\r\n    sin: 'sin',\r\n    cos: 'cos',\r\n    tg: 'tg',\r\n    ln: 'ln',\r\n    log: 'log',\r\n    '^': '^',\r\n    '(': '(',\r\n    ')': ')',\r\n    '!': '!'\r\n};\r\nconst specialFunctionFromMath = {\r\n    sin: Math.sin,\r\n    cos: Math.cos,\r\n    tg: Math.tan,\r\n    ln: Math.log,\r\n    log: Math.log10,\r\n    '^': Math.pow,\r\n    '!': calculateFactorial\r\n};\r\nfunction calculateFactorial(num) {\r\n    if (0 === num || 1 === num) {\r\n        return 1;\r\n    }\r\n    else {\r\n        return calculateFactorial(num - 1) * num;\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvZW51bXMvc3BlY2lhbF9mdW5jdGlvbnMudHM/ODQyZiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQU9PLE1BQU0sZ0JBQWdCLEdBQXNCO0lBQy9DLEdBQUcsRUFBRSxLQUFLO0lBQ1YsR0FBRyxFQUFFLEtBQUs7SUFDVixFQUFFLEVBQUUsSUFBSTtJQUNSLEVBQUUsRUFBRSxJQUFJO0lBQ1IsR0FBRyxFQUFFLEtBQUs7SUFDVixHQUFHLEVBQUUsR0FBRztJQUNSLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLEdBQUc7SUFDUixHQUFHLEVBQUUsR0FBRztDQUNYLENBQUM7QUFFSyxNQUFNLHVCQUF1QixHQUE4QjtJQUM5RCxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7SUFDYixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7SUFDYixFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUc7SUFDWixFQUFFLEVBQUUsSUFBSSxDQUFDLEdBQUc7SUFDWixHQUFHLEVBQUUsSUFBSSxDQUFDLEtBQUs7SUFDZixHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUc7SUFDYixHQUFHLEVBQUUsa0JBQWtCO0NBQzFCLENBQUM7QUFFRiw0QkFBNEIsR0FBVztJQUNuQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLEdBQUcsRUFBRTtRQUN4QixPQUFPLENBQUMsQ0FBQztLQUNaO1NBQU07UUFDSCxPQUFPLGtCQUFrQixDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7S0FDNUM7QUFDTCxDQUFDIiwiZmlsZSI6IjEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbnRlcmZhY2UgSVNwZWNpYWxGdW5jdGlvbnMge1xyXG4gICAgW2tleTogc3RyaW5nXTogc3RyaW5nXHJcbn1cclxuaW50ZXJmYWNlIElTcGVjaWFsRnVuY3Rpb25zRnJvbU1hdGgge1xyXG4gICAgW2tleTogc3RyaW5nXTogKC4uLmFyZ3M6IG51bWJlcltdKSA9PiBudW1iZXJcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNwZWNpYWxGdW5jdGlvbnM6IElTcGVjaWFsRnVuY3Rpb25zID0ge1xyXG4gICAgc2luOiAnc2luJyxcclxuICAgIGNvczogJ2NvcycsXHJcbiAgICB0ZzogJ3RnJyxcclxuICAgIGxuOiAnbG4nLFxyXG4gICAgbG9nOiAnbG9nJyxcclxuICAgICdeJzogJ14nLFxyXG4gICAgJygnOiAnKCcsXHJcbiAgICAnKSc6ICcpJyxcclxuICAgICchJzogJyEnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3Qgc3BlY2lhbEZ1bmN0aW9uRnJvbU1hdGg6IElTcGVjaWFsRnVuY3Rpb25zRnJvbU1hdGggPSB7XHJcbiAgICBzaW46IE1hdGguc2luLFxyXG4gICAgY29zOiBNYXRoLmNvcyxcclxuICAgIHRnOiBNYXRoLnRhbixcclxuICAgIGxuOiBNYXRoLmxvZyxcclxuICAgIGxvZzogTWF0aC5sb2cxMCxcclxuICAgICdeJzogTWF0aC5wb3csXHJcbiAgICAnISc6IGNhbGN1bGF0ZUZhY3RvcmlhbFxyXG59O1xyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlRmFjdG9yaWFsKG51bTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGlmICgwID09PSBudW0gfHwgMSA9PT0gbnVtKSB7XHJcbiAgICAgICAgcmV0dXJuIDE7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJldHVybiBjYWxjdWxhdGVGYWN0b3JpYWwobnVtIC0gMSkgKiBudW07XHJcbiAgICB9XHJcbn1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///1\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Observer; });\nclass Observer {\r\n    constructor() {\r\n        this.observers = [];\r\n    }\r\n    on(observer, event, callback) {\r\n        this.observers.push({\r\n            observer,\r\n            event,\r\n            callback\r\n        });\r\n    }\r\n    off(observer, event) {\r\n        this.observers.forEach((entry, index) => {\r\n            if (entry.observer === observer && entry.event === event) {\r\n                this.observers.splice(index, 1);\r\n            }\r\n        });\r\n    }\r\n    notify(event, data = {}) {\r\n        this.observers.forEach((entry) => {\r\n            if (entry.event === event) {\r\n                entry.callback.call(entry.observer, data);\r\n            }\r\n        });\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29yZS9vYnNlcnZlci50cz85MjhmIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFFTTtJQUFOO1FBQ1ksY0FBUyxHQUFrQixFQUFFLENBQUM7SUF1QjFDLENBQUM7SUFyQkcsRUFBRSxDQUFDLFFBQWtCLEVBQUUsS0FBYSxFQUFFLFFBQW9CO1FBQ3RELElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1lBQ2hCLFFBQVE7WUFDUixLQUFLO1lBQ0wsUUFBUTtTQUNYLENBQUMsQ0FBQztJQUNQLENBQUM7SUFDRCxHQUFHLENBQUMsUUFBa0IsRUFBRSxLQUFhO1FBQ2pDLElBQUksQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLENBQUMsS0FBSyxFQUFFLEtBQUssRUFBRSxFQUFFO1lBQ3BDLElBQUcsS0FBSyxDQUFDLFFBQVEsS0FBSyxRQUFRLElBQUksS0FBSyxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUU7Z0JBQ3JELElBQUksQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssRUFBRSxDQUFDLENBQUMsQ0FBQzthQUNuQztRQUNMLENBQUMsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztJQUNELE1BQU0sQ0FBQyxLQUFhLEVBQUUsSUFBSSxHQUFHLEVBQUU7UUFDM0IsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxLQUFLLEVBQUUsRUFBRTtZQUM3QixJQUFHLEtBQUssQ0FBQyxLQUFLLEtBQUssS0FBSyxFQUFFO2dCQUN0QixLQUFLLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxDQUFDO2FBQzdDO1FBQ0wsQ0FBQyxDQUFDLENBQUM7SUFDUCxDQUFDO0NBQ0oiLCJmaWxlIjoiMi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7SU9ic2VydmFibGV9IGZyb20gJy4vSU9ic2VydmFibGUnO1xyXG5cclxuZXhwb3J0IGNsYXNzIE9ic2VydmVyIHtcclxuICAgIHByaXZhdGUgb2JzZXJ2ZXJzOiBJT2JzZXJ2YWJsZVtdID0gW107XHJcblxyXG4gICAgb24ob2JzZXJ2ZXI6IE9ic2VydmVyLCBldmVudDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzLnB1c2goe1xyXG4gICAgICAgICAgICBvYnNlcnZlcixcclxuICAgICAgICAgICAgZXZlbnQsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvZmYob2JzZXJ2ZXI6IE9ic2VydmVyLCBldmVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5vYnNlcnZlcnMuZm9yRWFjaCgoZW50cnksIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGlmKGVudHJ5Lm9ic2VydmVyID09PSBvYnNlcnZlciAmJiBlbnRyeS5ldmVudCA9PT0gZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMub2JzZXJ2ZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIG5vdGlmeShldmVudDogc3RyaW5nLCBkYXRhID0ge30pIHtcclxuICAgICAgICB0aGlzLm9ic2VydmVycy5mb3JFYWNoKChlbnRyeSkgPT4ge1xyXG4gICAgICAgICAgICBpZihlbnRyeS5ldmVudCA9PT0gZXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIGVudHJ5LmNhbGxiYWNrLmNhbGwoZW50cnkub2JzZXJ2ZXIsIGRhdGEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///2\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return calculateFactorial; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return calculateLogarithm; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return calculatePower; });\n/* harmony import */ var _enums_special_functions__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);\n\r\nfunction isInteger(num) {\r\n    return num % 1 === 0;\r\n}\r\nfunction calculateFactorial(partialResult) {\r\n    const lastFunctionOccurence = partialResult.lastIndexOf('!');\r\n    const factorialNumberArray = [];\r\n    let factorialNumberFirstIndex = 0;\r\n    let factorialNumber;\r\n    let i;\r\n    for (i = lastFunctionOccurence - 1; i >= 0; i--) {\r\n        if (/[0-9.]/.test(partialResult.charAt(i))) {\r\n            factorialNumberArray.unshift(partialResult.charAt(i));\r\n            factorialNumberFirstIndex = i;\r\n        }\r\n        else {\r\n            break;\r\n        }\r\n    }\r\n    factorialNumber = Number(factorialNumberArray.join(''));\r\n    return {\r\n        value: isInteger(factorialNumber) ? _enums_special_functions__WEBPACK_IMPORTED_MODULE_0__[/* specialFunctionFromMath */ \"a\"]['!'](factorialNumber) : NaN,\r\n        index: i\r\n    };\r\n}\r\nfunction calculateLogarithm(partialResult) {\r\n    const lastOpeningBracket = partialResult.lastIndexOf('(');\r\n    const lastClosingBracket = partialResult.lastIndexOf(')');\r\n    const beforeLastOpeningBracket = partialResult.lastIndexOf('(', lastOpeningBracket - 1);\r\n    const beforeLastClosingBracket = partialResult.lastIndexOf(')', lastClosingBracket - 1);\r\n    const firstBracketsContent = partialResult.substring(beforeLastOpeningBracket + 1, beforeLastClosingBracket);\r\n    const secondBracketsContent = partialResult.substring(lastOpeningBracket + 1, lastClosingBracket);\r\n    return (_enums_special_functions__WEBPACK_IMPORTED_MODULE_0__[/* specialFunctionFromMath */ \"a\"]['log'](eval(firstBracketsContent))\r\n        / _enums_special_functions__WEBPACK_IMPORTED_MODULE_0__[/* specialFunctionFromMath */ \"a\"]['log'](eval(secondBracketsContent)));\r\n}\r\nfunction calculatePower(partialResult) {\r\n    const lastFunctionOccurence = partialResult.lastIndexOf('^');\r\n    const bracketsContent = partialResult.substring(partialResult.lastIndexOf('(') + 1, partialResult.lastIndexOf(')'));\r\n    let beforeFunctionFirstValueIndex = lastFunctionOccurence - 1;\r\n    let beforeFunctionFirstValue;\r\n    let result;\r\n    let i;\r\n    for (i = beforeFunctionFirstValueIndex; i >= 0; i--) {\r\n        if (/[0-9.]/.test(partialResult.charAt(i))) {\r\n            beforeFunctionFirstValueIndex = i;\r\n        }\r\n        else {\r\n            if (i === 0) {\r\n                beforeFunctionFirstValueIndex = 0;\r\n            }\r\n            break;\r\n        }\r\n    }\r\n    beforeFunctionFirstValue = partialResult.substring(beforeFunctionFirstValueIndex, lastFunctionOccurence);\r\n    result = _enums_special_functions__WEBPACK_IMPORTED_MODULE_0__[/* specialFunctionFromMath */ \"a\"]['^'](eval(beforeFunctionFirstValue), eval(bracketsContent));\r\n    return {\r\n        value: result,\r\n        index: i\r\n    };\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvaGVscGVycy9jYWxjdWxhdGlvbl9oZWxwZXIudHM/MDdhMiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O0FBQW1FO0FBT25FLG1CQUFtQixHQUFXO0lBQzFCLE9BQU8sR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDekIsQ0FBQztBQUVLLDRCQUE2QixhQUFxQjtJQUNwRCxNQUFNLHFCQUFxQixHQUFXLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckUsTUFBTSxvQkFBb0IsR0FBYSxFQUFFLENBQUM7SUFDMUMsSUFBSSx5QkFBeUIsR0FBVyxDQUFDLENBQUM7SUFDMUMsSUFBSSxlQUF1QixDQUFDO0lBQzVCLElBQUksQ0FBUyxDQUFDO0lBRWQsS0FBSyxDQUFDLEdBQUMscUJBQXFCLEdBQUcsQ0FBQyxFQUFFLENBQUMsSUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEVBQUU7UUFDekMsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUN4QyxvQkFBb0IsQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBQ3RELHlCQUF5QixHQUFHLENBQUMsQ0FBQztTQUNqQzthQUFNO1lBQ0gsTUFBTTtTQUNUO0tBQ0o7SUFDRCxlQUFlLEdBQUcsTUFBTSxDQUFDLG9CQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBRXhELE9BQU87UUFDSCxLQUFLLEVBQUUsU0FBUyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsQ0FBQyx3RkFBdUIsQ0FBQyxHQUFHLENBQUMsQ0FBQyxlQUFlLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRztRQUN2RixLQUFLLEVBQUUsQ0FBQztLQUNYLENBQUM7QUFDTixDQUFDO0FBQ0ssNEJBQTZCLGFBQXFCO0lBQ3BELE1BQU0sa0JBQWtCLEdBQUcsYUFBYSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMxRCxNQUFNLGtCQUFrQixHQUFHLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDMUQsTUFBTSx3QkFBd0IsR0FBRyxhQUFhLENBQUMsV0FBVyxDQUFDLEdBQUcsRUFBRSxrQkFBa0IsR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4RixNQUFNLHdCQUF3QixHQUFHLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxFQUFFLGtCQUFrQixHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLE1BQU0sb0JBQW9CLEdBQVcsYUFBYSxDQUFDLFNBQVMsQ0FDeEQsd0JBQXdCLEdBQUcsQ0FBQyxFQUM1Qix3QkFBd0IsQ0FDM0IsQ0FBQztJQUNGLE1BQU0scUJBQXFCLEdBQVcsYUFBYSxDQUFDLFNBQVMsQ0FDekQsa0JBQWtCLEdBQUcsQ0FBQyxFQUN0QixrQkFBa0IsQ0FDckIsQ0FBQztJQUNGLE9BQU8sQ0FBQyx3RkFBdUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsb0JBQW9CLENBQUMsQ0FBQztVQUM1RCx3RkFBdUIsQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDdkUsQ0FBQztBQUNLLHdCQUF5QixhQUFxQjtJQUNoRCxNQUFNLHFCQUFxQixHQUFXLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDckUsTUFBTSxlQUFlLEdBQVcsYUFBYSxDQUFDLFNBQVMsQ0FDbkQsYUFBYSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEVBQ2xDLGFBQWEsQ0FBQyxXQUFXLENBQUMsR0FBRyxDQUFDLENBQ2pDLENBQUM7SUFDRixJQUFJLDZCQUE2QixHQUFXLHFCQUFxQixHQUFHLENBQUMsQ0FBQztJQUN0RSxJQUFJLHdCQUFnQyxDQUFDO0lBQ3JDLElBQUksTUFBYyxDQUFDO0lBQ25CLElBQUksQ0FBUyxDQUFDO0lBRWQsS0FBSyxDQUFDLEdBQUcsNkJBQTZCLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUNqRCxJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1lBQ3hDLDZCQUE2QixHQUFHLENBQUMsQ0FBQztTQUNyQzthQUFNO1lBQ0gsSUFBSSxDQUFDLEtBQUssQ0FBQyxFQUFFO2dCQUNULDZCQUE2QixHQUFHLENBQUMsQ0FBQzthQUNyQztZQUNELE1BQU07U0FDVDtLQUNKO0lBQ0Qsd0JBQXdCLEdBQUcsYUFBYSxDQUFDLFNBQVMsQ0FDOUMsNkJBQTZCLEVBQzdCLHFCQUFxQixDQUN4QixDQUFDO0lBQ0YsTUFBTSxHQUFHLHdGQUF1QixDQUFDLEdBQUcsQ0FBQyxDQUNqQyxJQUFJLENBQUMsd0JBQXdCLENBQUMsRUFDOUIsSUFBSSxDQUFDLGVBQWUsQ0FBQyxDQUN4QixDQUFDO0lBRUYsT0FBTztRQUNILEtBQUssRUFBRSxNQUFNO1FBQ2IsS0FBSyxFQUFFLENBQUM7S0FDWDtBQUNMLENBQUMiLCJmaWxlIjoiMy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7c3BlY2lhbEZ1bmN0aW9uRnJvbU1hdGh9IGZyb20gJy4uL2VudW1zL3NwZWNpYWxfZnVuY3Rpb25zJztcclxuXHJcbmludGVyZmFjZSBJQ2FsY3VsYXRpb25SZXN1bHQge1xyXG4gICAgdmFsdWU6IG51bWJlcixcclxuICAgIGluZGV4OiBudW1iZXJcclxufVxyXG5cclxuZnVuY3Rpb24gaXNJbnRlZ2VyKG51bTogbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gbnVtICUgMSA9PT0gMDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUZhY3RvcmlhbChwYXJ0aWFsUmVzdWx0OiBzdHJpbmcpOiBJQ2FsY3VsYXRpb25SZXN1bHQge1xyXG4gICAgY29uc3QgbGFzdEZ1bmN0aW9uT2NjdXJlbmNlOiBudW1iZXIgPSBwYXJ0aWFsUmVzdWx0Lmxhc3RJbmRleE9mKCchJyk7XHJcbiAgICBjb25zdCBmYWN0b3JpYWxOdW1iZXJBcnJheTogc3RyaW5nW10gPSBbXTtcclxuICAgIGxldCBmYWN0b3JpYWxOdW1iZXJGaXJzdEluZGV4OiBudW1iZXIgPSAwO1xyXG4gICAgbGV0IGZhY3RvcmlhbE51bWJlcjogbnVtYmVyO1xyXG4gICAgbGV0IGk6IG51bWJlcjtcclxuXHJcbiAgICBmb3IgKGk9bGFzdEZ1bmN0aW9uT2NjdXJlbmNlIC0gMTsgaT49MDsgaS0tKSB7XHJcbiAgICAgICAgaWYgKC9bMC05Ll0vLnRlc3QocGFydGlhbFJlc3VsdC5jaGFyQXQoaSkpKSB7XHJcbiAgICAgICAgICAgIGZhY3RvcmlhbE51bWJlckFycmF5LnVuc2hpZnQocGFydGlhbFJlc3VsdC5jaGFyQXQoaSkpO1xyXG4gICAgICAgICAgICBmYWN0b3JpYWxOdW1iZXJGaXJzdEluZGV4ID0gaTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmYWN0b3JpYWxOdW1iZXIgPSBOdW1iZXIoZmFjdG9yaWFsTnVtYmVyQXJyYXkuam9pbignJykpO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdmFsdWU6IGlzSW50ZWdlcihmYWN0b3JpYWxOdW1iZXIpID8gc3BlY2lhbEZ1bmN0aW9uRnJvbU1hdGhbJyEnXShmYWN0b3JpYWxOdW1iZXIpIDogTmFOLFxyXG4gICAgICAgIGluZGV4OiBpXHJcbiAgICB9O1xyXG59XHJcbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVMb2dhcml0aG0ocGFydGlhbFJlc3VsdDogc3RyaW5nKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGxhc3RPcGVuaW5nQnJhY2tldCA9IHBhcnRpYWxSZXN1bHQubGFzdEluZGV4T2YoJygnKTtcclxuICAgIGNvbnN0IGxhc3RDbG9zaW5nQnJhY2tldCA9IHBhcnRpYWxSZXN1bHQubGFzdEluZGV4T2YoJyknKTtcclxuICAgIGNvbnN0IGJlZm9yZUxhc3RPcGVuaW5nQnJhY2tldCA9IHBhcnRpYWxSZXN1bHQubGFzdEluZGV4T2YoJygnLCBsYXN0T3BlbmluZ0JyYWNrZXQgLSAxKTtcclxuICAgIGNvbnN0IGJlZm9yZUxhc3RDbG9zaW5nQnJhY2tldCA9IHBhcnRpYWxSZXN1bHQubGFzdEluZGV4T2YoJyknLCBsYXN0Q2xvc2luZ0JyYWNrZXQgLSAxKTtcclxuICAgIGNvbnN0IGZpcnN0QnJhY2tldHNDb250ZW50OiBzdHJpbmcgPSBwYXJ0aWFsUmVzdWx0LnN1YnN0cmluZyhcclxuICAgICAgICBiZWZvcmVMYXN0T3BlbmluZ0JyYWNrZXQgKyAxLFxyXG4gICAgICAgIGJlZm9yZUxhc3RDbG9zaW5nQnJhY2tldFxyXG4gICAgKTtcclxuICAgIGNvbnN0IHNlY29uZEJyYWNrZXRzQ29udGVudDogc3RyaW5nID0gcGFydGlhbFJlc3VsdC5zdWJzdHJpbmcoXHJcbiAgICAgICAgbGFzdE9wZW5pbmdCcmFja2V0ICsgMSxcclxuICAgICAgICBsYXN0Q2xvc2luZ0JyYWNrZXRcclxuICAgICk7XHJcbiAgICByZXR1cm4gKHNwZWNpYWxGdW5jdGlvbkZyb21NYXRoWydsb2cnXShldmFsKGZpcnN0QnJhY2tldHNDb250ZW50KSlcclxuICAgICAgICAvIHNwZWNpYWxGdW5jdGlvbkZyb21NYXRoWydsb2cnXShldmFsKHNlY29uZEJyYWNrZXRzQ29udGVudCkpKTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gY2FsY3VsYXRlUG93ZXIocGFydGlhbFJlc3VsdDogc3RyaW5nKTogSUNhbGN1bGF0aW9uUmVzdWx0IHtcclxuICAgIGNvbnN0IGxhc3RGdW5jdGlvbk9jY3VyZW5jZTogbnVtYmVyID0gcGFydGlhbFJlc3VsdC5sYXN0SW5kZXhPZignXicpO1xyXG4gICAgY29uc3QgYnJhY2tldHNDb250ZW50OiBzdHJpbmcgPSBwYXJ0aWFsUmVzdWx0LnN1YnN0cmluZyhcclxuICAgICAgICBwYXJ0aWFsUmVzdWx0Lmxhc3RJbmRleE9mKCcoJykgKyAxLFxyXG4gICAgICAgIHBhcnRpYWxSZXN1bHQubGFzdEluZGV4T2YoJyknKVxyXG4gICAgKTtcclxuICAgIGxldCBiZWZvcmVGdW5jdGlvbkZpcnN0VmFsdWVJbmRleDogbnVtYmVyID0gbGFzdEZ1bmN0aW9uT2NjdXJlbmNlIC0gMTtcclxuICAgIGxldCBiZWZvcmVGdW5jdGlvbkZpcnN0VmFsdWU6IHN0cmluZztcclxuICAgIGxldCByZXN1bHQ6IG51bWJlcjtcclxuICAgIGxldCBpOiBudW1iZXI7XHJcblxyXG4gICAgZm9yIChpID0gYmVmb3JlRnVuY3Rpb25GaXJzdFZhbHVlSW5kZXg7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgaWYgKC9bMC05Ll0vLnRlc3QocGFydGlhbFJlc3VsdC5jaGFyQXQoaSkpKSB7XHJcbiAgICAgICAgICAgIGJlZm9yZUZ1bmN0aW9uRmlyc3RWYWx1ZUluZGV4ID0gaTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYmVmb3JlRnVuY3Rpb25GaXJzdFZhbHVlSW5kZXggPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGJlZm9yZUZ1bmN0aW9uRmlyc3RWYWx1ZSA9IHBhcnRpYWxSZXN1bHQuc3Vic3RyaW5nKFxyXG4gICAgICAgIGJlZm9yZUZ1bmN0aW9uRmlyc3RWYWx1ZUluZGV4LFxyXG4gICAgICAgIGxhc3RGdW5jdGlvbk9jY3VyZW5jZVxyXG4gICAgKTtcclxuICAgIHJlc3VsdCA9IHNwZWNpYWxGdW5jdGlvbkZyb21NYXRoWydeJ10oXHJcbiAgICAgICAgZXZhbChiZWZvcmVGdW5jdGlvbkZpcnN0VmFsdWUpLFxyXG4gICAgICAgIGV2YWwoYnJhY2tldHNDb250ZW50KVxyXG4gICAgKTtcclxuXHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHZhbHVlOiByZXN1bHQsXHJcbiAgICAgICAgaW5kZXg6IGlcclxuICAgIH1cclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///3\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return unicodeToValue; });\nconst unicodeToValueMap = {\r\n    '%CF%80': (Math.PI).toString(),\r\n    '%F0%9D%91%92': (Math.E).toString()\r\n};\r\nconst stringToDisplayMap = {\r\n    'power': '^('\r\n};\r\nfunction unicodeToValue(value) {\r\n    const mapedValue = unicodeToValueMap[encodeURI(value)];\r\n    return mapedValue || value;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvaGVscGVycy91bmljb2RlX3ZhbHVlLnRzPzdlOGEiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBR0E7QUFBQSxNQUFNLGlCQUFpQixHQUF1QjtJQUMxQyxRQUFRLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFO0lBQzlCLGNBQWMsRUFBRSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxRQUFRLEVBQUU7Q0FDdEMsQ0FBQztBQUNGLE1BQU0sa0JBQWtCLEdBQXVCO0lBQzNDLE9BQU8sRUFBRSxJQUFJO0NBQ2hCLENBQUM7QUFFSSx3QkFBeUIsS0FBYTtJQUN4QyxNQUFNLFVBQVUsR0FBVyxpQkFBaUIsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUUvRCxPQUFPLFVBQVUsSUFBSSxLQUFLLENBQUM7QUFDL0IsQ0FBQyIsImZpbGUiOiI0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW50ZXJmYWNlIElVbmljb2RlVG9WYWx1ZU1hcCB7XHJcbiAgICBba2V5OiBzdHJpbmddOiBzdHJpbmdcclxufVxyXG5jb25zdCB1bmljb2RlVG9WYWx1ZU1hcDogSVVuaWNvZGVUb1ZhbHVlTWFwID0ge1xyXG4gICAgJyVDRiU4MCc6IChNYXRoLlBJKS50b1N0cmluZygpLFxyXG4gICAgJyVGMCU5RCU5MSU5Mic6IChNYXRoLkUpLnRvU3RyaW5nKClcclxufTtcclxuY29uc3Qgc3RyaW5nVG9EaXNwbGF5TWFwOiBJVW5pY29kZVRvVmFsdWVNYXAgPSB7XHJcbiAgICAncG93ZXInOiAnXignXHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdW5pY29kZVRvVmFsdWUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBtYXBlZFZhbHVlOiBzdHJpbmcgPSB1bmljb2RlVG9WYWx1ZU1hcFtlbmNvZGVVUkkodmFsdWUpXTtcclxuXHJcbiAgICByZXR1cm4gbWFwZWRWYWx1ZSB8fCB2YWx1ZTtcclxufSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///4\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("\n// EXTERNAL MODULE: ./src/ts/core/observer.ts\nvar observer = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./src/ts/enums/event_enums.ts\nvar event_enums = __webpack_require__(0);\n\n// EXTERNAL MODULE: ./src/ts/enums/special_functions.ts\nvar special_functions = __webpack_require__(1);\n\n// CONCATENATED MODULE: ./src/ts/helpers/misc_helper.ts\nfunction replaceLast(text, textToReplace, newValue) {\r\n    let textToReplaceLastIndex = text.lastIndexOf(textToReplace);\r\n    return text.substring(0, textToReplaceLastIndex) + newValue;\r\n}\r\nfunction replaceNth(num, text, textToReplace, newValue) {\r\n    let nth = 0;\r\n    return text.replace(new RegExp(textToReplace, 'g'), function (match) {\r\n        nth++;\r\n        return nth === num ? newValue : match;\r\n    });\r\n}\r\n\n// CONCATENATED MODULE: ./src/ts/globals/config.ts\nconst DISPLAY_FONT_SIZE = 24;\r\n\n// CONCATENATED MODULE: ./src/ts/views/calculator_view.ts\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return calculator_view_CalculatorView; });\n\r\n\r\n\r\n\r\n\r\nclass calculator_view_CalculatorView extends observer[\"a\" /* Observer */] {\r\n    constructor() {\r\n        super();\r\n        this.subscriptOpen = 0;\r\n        this.maxSubscriptOpen = 0;\r\n        this.superscriptOpen = 0;\r\n        this.maxSuperscriptOpen = 0;\r\n        this.lastSpecialDisplay = [];\r\n        this.buttons = document.querySelectorAll('[data-calc-button]');\r\n        this.display = document.querySelector('.calculator-display');\r\n        this.lastOperationText = document.querySelector('.last-operation');\r\n        this.prepareButtons();\r\n    }\r\n    prepareButtons() {\r\n        Array.prototype.forEach.call(this.buttons, (button) => {\r\n            const calcButtonValue = button.dataset.calcButton;\r\n            if ('cancel' === calcButtonValue) {\r\n                button.addEventListener('click', this.onCancelButtonClick.bind(this));\r\n            }\r\n            else if ('=' === calcButtonValue) {\r\n                button.addEventListener('click', this.onEqualButtonClick.bind(this));\r\n            }\r\n            else if (calcButtonValue && special_functions[\"b\" /* specialFunctions */][calcButtonValue]) {\r\n                button.addEventListener('click', this.onCalculatorSpecialFunctionClick.bind(this, calcButtonValue));\r\n            }\r\n            else {\r\n                button.addEventListener('click', this.onCalculatorButtonNumberClick.bind(this, calcButtonValue));\r\n            }\r\n            button.removeAttribute('data-calc-button');\r\n        });\r\n    }\r\n    resetDisplay() {\r\n        this.getDisplay().innerHTML = '';\r\n    }\r\n    addToDisplay(value) {\r\n        const innerHtml = this.getDisplay().innerHTML;\r\n        const lastSpecialDisplay = this.lastSpecialDisplay[this.lastSpecialDisplay.length - 1];\r\n        const sub = this.subscriptOpen;\r\n        const sup = this.superscriptOpen;\r\n        const maxSub = this.maxSubscriptOpen;\r\n        const maxSup = this.maxSuperscriptOpen;\r\n        let valueOccurence;\r\n        if ('sub' === lastSpecialDisplay && sub) {\r\n            valueOccurence = (maxSub === sub) ? 1 : maxSub;\r\n            this.getDisplay().innerHTML = replaceNth(valueOccurence, innerHtml, '</sub>', `${value}</sub>`);\r\n        }\r\n        else if ('sup' === lastSpecialDisplay && sup) {\r\n            valueOccurence = (maxSup === sup) ? 1 : maxSup;\r\n            this.getDisplay().innerHTML = replaceNth(valueOccurence, innerHtml, '</sup>', `${value}</sup>`);\r\n        }\r\n        else {\r\n            this.getDisplay().innerHTML += value;\r\n        }\r\n    }\r\n    updateDisplay(value) {\r\n        this.getDisplay().innerHTML = value;\r\n    }\r\n    updateLastOperation() {\r\n        this.getLastOperation().innerHTML = this.getDisplay().innerHTML;\r\n    }\r\n    resetLastOperation() {\r\n        this.getLastOperation().innerHTML = '';\r\n    }\r\n    startSubscript() {\r\n        const innerHtml = this.getDisplay().innerHTML;\r\n        let fontSize = DISPLAY_FONT_SIZE;\r\n        const subStyle = `\"font-size: ${(fontSize /= (this.subscriptOpen + 1) * 2) + 2}px !important;\"`;\r\n        this.lastSpecialDisplay.push('sub');\r\n        if (this.subscriptOpen) {\r\n            this.getDisplay().innerHTML = replaceLast(innerHtml, `</sub>`, `<sub style=${subStyle}></sub></sub>`);\r\n        }\r\n        else {\r\n            this.getDisplay().innerHTML += `<sub style=${subStyle}></sub>`;\r\n        }\r\n        this.subscriptOpen++;\r\n        this.maxSubscriptOpen++;\r\n    }\r\n    stopSubscript() {\r\n        this.subscriptOpen--;\r\n        this.lastSpecialDisplay.pop();\r\n        if (0 === this.subscriptOpen) {\r\n            this.maxSubscriptOpen = 0;\r\n        }\r\n    }\r\n    startSuperscript() {\r\n        const innerHtml = this.getDisplay().innerHTML;\r\n        let fontSize = DISPLAY_FONT_SIZE;\r\n        const supStyle = `\"font-size: ${(fontSize /= (this.subscriptOpen + 1) * 2) + 2}px !important;\"`;\r\n        this.lastSpecialDisplay.push('sup');\r\n        if (this.superscriptOpen) {\r\n            this.getDisplay().innerHTML = replaceLast(innerHtml, `</sup>`, `<sup style=${supStyle}></sup></sup>`);\r\n        }\r\n        else {\r\n            this.getDisplay().innerHTML += `<sup style=${supStyle}></sup>`;\r\n        }\r\n        this.superscriptOpen++;\r\n        this.maxSuperscriptOpen++;\r\n    }\r\n    stopSuperscript() {\r\n        this.superscriptOpen--;\r\n        this.lastSpecialDisplay.pop();\r\n        if (0 === this.superscriptOpen) {\r\n            this.maxSuperscriptOpen = 0;\r\n        }\r\n    }\r\n    resetSubSupCount() {\r\n        this.subscriptOpen = 0;\r\n        this.maxSubscriptOpen = 0;\r\n    }\r\n    onCalculatorButtonNumberClick(value) {\r\n        this.notify(event_enums[\"a\" /* EventEnum */].CALCULATOR_BUTTON_CLICKED, { value: value });\r\n    }\r\n    onCalculatorSpecialFunctionClick(value) {\r\n        this.notify(event_enums[\"a\" /* EventEnum */].CALCULATOR_SPECIAL_FUNCTION_CLICKED, { value: value });\r\n    }\r\n    onCancelButtonClick() {\r\n        this.notify(event_enums[\"a\" /* EventEnum */].CALCULATOR_CANCEL_CLICKED);\r\n    }\r\n    onEqualButtonClick() {\r\n        this.notify(event_enums[\"a\" /* EventEnum */].CALCULATOR_EQUAL_CLICKED);\r\n    }\r\n    getDisplay() {\r\n        if (this.display) {\r\n            return this.display;\r\n        }\r\n        else {\r\n            throw new Error('Calculator display element not found');\r\n        }\r\n    }\r\n    getLastOperation() {\r\n        if (this.lastOperationText) {\r\n            return this.lastOperationText;\r\n        }\r\n        else {\r\n            throw new Error('Calculator last operation element not found');\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvaGVscGVycy9taXNjX2hlbHBlci50cz81OTRhIiwid2VicGFjazovLy8uL3NyYy90cy9nbG9iYWxzL2NvbmZpZy50cz82Mzc4Iiwid2VicGFjazovLy8uL3NyYy90cy92aWV3cy9jYWxjdWxhdG9yX3ZpZXcudHM/OGU3OSJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztBQUFNLHFCQUFzQixJQUFZLEVBQUUsYUFBcUIsRUFBRSxRQUFnQjtJQUM3RSxJQUFJLHNCQUFzQixHQUFXLElBQUksQ0FBQyxXQUFXLENBQUMsYUFBYSxDQUFDLENBQUM7SUFFckUsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxzQkFBc0IsQ0FBQyxHQUFHLFFBQVEsQ0FBQztBQUNoRSxDQUFDO0FBQ0ssb0JBQXFCLEdBQVcsRUFBRSxJQUFZLEVBQUUsYUFBcUIsRUFBRSxRQUFnQjtJQUN6RixJQUFJLEdBQUcsR0FBVSxDQUFDLENBQUM7SUFFbkIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLElBQUksTUFBTSxDQUFDLGFBQWEsRUFBRSxHQUFHLENBQUMsRUFBRSxVQUFVLEtBQUs7UUFDL0QsR0FBRyxFQUFFLENBQUM7UUFDTixPQUFPLEdBQUcsS0FBSyxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0lBQzFDLENBQUMsQ0FBQyxDQUFDO0FBQ1AsQ0FBQzs7O0FDWk0sTUFBTSxpQkFBaUIsR0FBRyxFQUFFLENBQUM7Ozs7QUNBTTtBQUNLO0FBQ2E7QUFDRztBQUNuQjtBQUl0QyxvQ0FBc0IsU0FBUSw0QkFBUTtJQVV4QztRQUNJLEtBQUssRUFBRSxDQUFDO1FBUEosa0JBQWEsR0FBVyxDQUFDLENBQUM7UUFDMUIscUJBQWdCLEdBQVcsQ0FBQyxDQUFDO1FBQzdCLG9CQUFlLEdBQVcsQ0FBQyxDQUFDO1FBQzVCLHVCQUFrQixHQUFXLENBQUMsQ0FBQztRQUMvQix1QkFBa0Is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dW5jdGlvbiByZXBsYWNlTGFzdCh0ZXh0OiBzdHJpbmcsIHRleHRUb1JlcGxhY2U6IHN0cmluZywgbmV3VmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBsZXQgdGV4dFRvUmVwbGFjZUxhc3RJbmRleDogbnVtYmVyID0gdGV4dC5sYXN0SW5kZXhPZih0ZXh0VG9SZXBsYWNlKTtcclxuXHJcbiAgICByZXR1cm4gdGV4dC5zdWJzdHJpbmcoMCwgdGV4dFRvUmVwbGFjZUxhc3RJbmRleCkgKyBuZXdWYWx1ZTtcclxufVxyXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZU50aChudW06IG51bWJlciwgdGV4dDogc3RyaW5nLCB0ZXh0VG9SZXBsYWNlOiBzdHJpbmcsIG5ld1ZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgbGV0IG50aDpudW1iZXIgPSAwO1xyXG5cclxuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UobmV3IFJlZ0V4cCh0ZXh0VG9SZXBsYWNlLCAnZycpLCBmdW5jdGlvbiAobWF0Y2gpIHtcclxuICAgICAgICBudGgrKztcclxuICAgICAgICByZXR1cm4gbnRoID09PSBudW0gPyBuZXdWYWx1ZSA6IG1hdGNoO1xyXG4gICAgfSk7XHJcbn0iLCJleHBvcnQgY29uc3QgRElTUExBWV9GT05UX1NJWkUgPSAyNDsiLCJpbXBvcnQge09ic2VydmVyfSBmcm9tICcuLi9jb3JlL29ic2VydmVyJztcclxuaW1wb3J0IHtFdmVudEVudW19IGZyb20gJy4uL2VudW1zL2V2ZW50X2VudW1zJztcclxuaW1wb3J0IHtzcGVjaWFsRnVuY3Rpb25zfSBmcm9tIFwiLi4vZW51bXMvc3BlY2lhbF9mdW5jdGlvbnNcIjtcclxuaW1wb3J0IHtyZXBsYWNlTGFzdCwgcmVwbGFjZU50aH0gZnJvbSBcIi4uL2hlbHBlcnMvbWlzY19oZWxwZXJcIjtcclxuaW1wb3J0ICogYXMgY29uZmlnIGZyb20gJy4uL2dsb2JhbHMvY29uZmlnJztcclxuXHJcblxyXG5cclxuZXhwb3J0IGNsYXNzIENhbGN1bGF0b3JWaWV3IGV4dGVuZHMgT2JzZXJ2ZXJ7XHJcbiAgICBwcml2YXRlIGJ1dHRvbnM6IE5vZGVMaXN0O1xyXG4gICAgcHJpdmF0ZSBkaXNwbGF5OiBIVE1MRGl2RWxlbWVudCB8IG51bGw7XHJcbiAgICBwcml2YXRlIGxhc3RPcGVyYXRpb25UZXh0OiBIVE1MUGFyYWdyYXBoRWxlbWVudCB8IG51bGw7XHJcbiAgICBwcml2YXRlIHN1YnNjcmlwdE9wZW46IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIG1heFN1YnNjcmlwdE9wZW46IG51bWJlciA9IDA7XHJcbiAgICBwcml2YXRlIHN1cGVyc2NyaXB0T3BlbjogbnVtYmVyID0gMDtcclxuICAgIHByaXZhdGUgbWF4U3VwZXJzY3JpcHRPcGVuOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBsYXN0U3BlY2lhbERpc3BsYXk6IHN0cmluZ1tdID0gW107XHJcblxyXG4gICAgcHVibGljIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5idXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtY2FsYy1idXR0b25dJyk7XHJcbiAgICAgICAgdGhpcy5kaXNwbGF5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmNhbGN1bGF0b3ItZGlzcGxheScpO1xyXG4gICAgICAgIHRoaXMubGFzdE9wZXJhdGlvblRleHQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubGFzdC1vcGVyYXRpb24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5wcmVwYXJlQnV0dG9ucygpO1xyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBwcmVwYXJlQnV0dG9ucygpOiB2b2lkIHtcclxuICAgICAgICBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKHRoaXMuYnV0dG9ucywgKGJ1dHRvbjogSFRNTEVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY2FsY0J1dHRvblZhbHVlOiBzdHJpbmcgfCB1bmRlZmluZWQgPSBidXR0b24uZGF0YXNldC5jYWxjQnV0dG9uO1xyXG5cclxuICAgICAgICAgICAgaWYgKCdjYW5jZWwnID09PSBjYWxjQnV0dG9uVmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMub25DYW5jZWxCdXR0b25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgnPScgPT09IGNhbGNCdXR0b25WYWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkVxdWFsQnV0dG9uQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY2FsY0J1dHRvblZhbHVlICYmIHNwZWNpYWxGdW5jdGlvbnNbY2FsY0J1dHRvblZhbHVlXSkge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vbkNhbGN1bGF0b3JTcGVjaWFsRnVuY3Rpb25DbGljay5iaW5kKHRoaXMsIGNhbGNCdXR0b25WYWx1ZSkpO1xyXG4gICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9uQ2FsY3VsYXRvckJ1dHRvbk51bWJlckNsaWNrLmJpbmQodGhpcywgY2FsY0J1dHRvblZhbHVlKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJ1dHRvbi5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtY2FsYy1idXR0b24nKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZXNldERpc3BsYXkoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nZXREaXNwbGF5KCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgYWRkVG9EaXNwbGF5KHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBpbm5lckh0bWw6IHN0cmluZyA9IHRoaXMuZ2V0RGlzcGxheSgpLmlubmVySFRNTDtcclxuICAgICAgICBjb25zdCBsYXN0U3BlY2lhbERpc3BsYXk6IHN0cmluZyA9IHRoaXMubGFzdFNwZWNpYWxEaXNwbGF5W3RoaXMubGFzdFNwZWNpYWxEaXNwbGF5Lmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIGNvbnN0IHN1YjogbnVtYmVyID0gdGhpcy5zdWJzY3JpcHRPcGVuO1xyXG4gICAgICAgIGNvbnN0IHN1cDogbnVtYmVyID0gdGhpcy5zdXBlcnNjcmlwdE9wZW47XHJcbiAgICAgICAgY29uc3QgbWF4U3ViOiBudW1iZXIgPSB0aGlzLm1heFN1YnNjcmlwdE9wZW47XHJcbiAgICAgICAgY29uc3QgbWF4U3VwOiBudW1iZXIgPSB0aGlzLm1heFN1cGVyc2NyaXB0T3BlbjtcclxuICAgICAgICBsZXQgdmFsdWVPY2N1cmVuY2U7XHJcbiAgICAgICAgaWYgKCdzdWInID09PSBsYXN0U3BlY2lhbERpc3BsYXkgJiYgc3ViKSB7XHJcbiAgICAgICAgICAgIHZhbHVlT2NjdXJlbmNlID0gKG1heFN1YiA9PT0gc3ViKSA/IDEgOiBtYXhTdWI7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RGlzcGxheSgpLmlubmVySFRNTCA9IHJlcGxhY2VOdGgodmFsdWVPY2N1cmVuY2UsIGlubmVySHRtbCwnPC9zdWI+JywgYCR7dmFsdWV9PC9zdWI+YCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICgnc3VwJyA9PT0gbGFzdFNwZWNpYWxEaXNwbGF5ICYmIHN1cCkge1xyXG4gICAgICAgICAgICB2YWx1ZU9jY3VyZW5jZSA9IChtYXhTdXAgPT09IHN1cCkgPyAxIDogbWF4U3VwO1xyXG4gICAgICAgICAgICB0aGlzLmdldERpc3BsYXkoKS5pbm5lckhUTUwgPSByZXBsYWNlTnRoKHZhbHVlT2NjdXJlbmNlLCBpbm5lckh0bWwsJzwvc3VwPicsIGAke3ZhbHVlfTwvc3VwPmApO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREaXNwbGF5KCkuaW5uZXJIVE1MICs9IHZhbHVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyB1cGRhdGVEaXNwbGF5KHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmdldERpc3BsYXkoKS5pbm5lckhUTUwgPSB2YWx1ZTtcclxuICAgIH1cclxuICAgIHB1YmxpYyB1cGRhdGVMYXN0T3BlcmF0aW9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuZ2V0TGFzdE9wZXJhdGlvbigpLmlubmVySFRNTCA9IHRoaXMuZ2V0RGlzcGxheSgpLmlubmVySFRNTDtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZXNldExhc3RPcGVyYXRpb24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5nZXRMYXN0T3BlcmF0aW9uKCkuaW5uZXJIVE1MID0gJyc7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgc3RhcnRTdWJzY3JpcHQoKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgaW5uZXJIdG1sOiBzdHJpbmcgPSB0aGlzLmdldERpc3BsYXkoKS5pbm5lckhUTUw7XHJcbiAgICAgICAgbGV0IGZvbnRTaXplOiBudW1iZXIgPSBjb25maWcuRElTUExBWV9GT05UX1NJWkU7XHJcbiAgICAgICAgY29uc3Qgc3ViU3R5bGU6IHN0cmluZyA9IGBcImZvbnQtc2l6ZTogJHsoZm9udFNpemUgLz0gKHRoaXMuc3Vic2NyaXB0T3BlbiArIDEpICogMikgKyAyfXB4ICFpbXBvcnRhbnQ7XCJgO1xyXG4gICAgICAgIHRoaXMubGFzdFNwZWNpYWxEaXNwbGF5LnB1c2goJ3N1YicpO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRPcGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RGlzcGxheSgpLmlubmVySFRNTCA9IHJlcGxhY2VMYXN0KFxyXG4gICAgICAgICAgICAgICAgaW5uZXJIdG1sLFxyXG4gICAgICAgICAgICAgICAgYDwvc3ViPmAsXHJcbiAgICAgICAgICAgICAgICBgPHN1YiBzdHlsZT0ke3N1YlN0eWxlfT48L3N1Yj48L3N1Yj5gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREaXNwbGF5KCkuaW5uZXJIVE1MICs9IGA8c3ViIHN0eWxlPSR7c3ViU3R5bGV9Pjwvc3ViPmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0T3BlbisrO1xyXG4gICAgICAgIHRoaXMubWF4U3Vic2NyaXB0T3BlbisrO1xyXG4gICAgfVxyXG4gICAgcHVibGljIHN0b3BTdWJzY3JpcHQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdWJzY3JpcHRPcGVuLS07XHJcbiAgICAgICAgdGhpcy5sYXN0U3BlY2lhbERpc3BsYXkucG9wKCk7XHJcbiAgICAgICAgaWYgKDAgPT09IHRoaXMuc3Vic2NyaXB0T3Blbikge1xyXG4gICAgICAgICAgICB0aGlzLm1heFN1YnNjcmlwdE9wZW4gPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyBzdGFydFN1cGVyc2NyaXB0KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGlubmVySHRtbDogc3RyaW5nID0gdGhpcy5nZXREaXNwbGF5KCkuaW5uZXJIVE1MO1xyXG4gICAgICAgIGxldCBmb250U2l6ZTogbnVtYmVyID0gY29uZmlnLkRJU1BMQVlfRk9OVF9TSVpFO1xyXG4gICAgICAgIGNvbnN0IHN1cFN0eWxlOiBzdHJpbmcgPSBgXCJmb250LXNpemU6ICR7KGZvbnRTaXplIC89ICh0aGlzLnN1YnNjcmlwdE9wZW4gKyAxKSAqIDIpICsgMn1weCAhaW1wb3J0YW50O1wiYDtcclxuICAgICAgICB0aGlzLmxhc3RTcGVjaWFsRGlzcGxheS5wdXNoKCdzdXAnKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3VwZXJzY3JpcHRPcGVuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0RGlzcGxheSgpLmlubmVySFRNTCA9IHJlcGxhY2VMYXN0KFxyXG4gICAgICAgICAgICAgICAgaW5uZXJIdG1sLFxyXG4gICAgICAgICAgICAgICAgYDwvc3VwPmAsXHJcbiAgICAgICAgICAgICAgICBgPHN1cCBzdHlsZT0ke3N1cFN0eWxlfT48L3N1cD48L3N1cD5gXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5nZXREaXNwbGF5KCkuaW5uZXJIVE1MICs9IGA8c3VwIHN0eWxlPSR7c3VwU3R5bGV9Pjwvc3VwPmA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuc3VwZXJzY3JpcHRPcGVuKys7XHJcbiAgICAgICAgdGhpcy5tYXhTdXBlcnNjcmlwdE9wZW4rKztcclxuICAgIH1cclxuICAgIHB1YmxpYyBzdG9wU3VwZXJzY3JpcHQoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdXBlcnNjcmlwdE9wZW4tLTtcclxuICAgICAgICB0aGlzLmxhc3RTcGVjaWFsRGlzcGxheS5wb3AoKTtcclxuICAgICAgICBpZiAoMCA9PT0gdGhpcy5zdXBlcnNjcmlwdE9wZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5tYXhTdXBlcnNjcmlwdE9wZW4gPSAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHB1YmxpYyByZXNldFN1YlN1cENvdW50KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc3Vic2NyaXB0T3BlbiA9IDA7XHJcbiAgICAgICAgdGhpcy5tYXhTdWJzY3JpcHRPcGVuID0gMDtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25DYWxjdWxhdG9yQnV0dG9uTnVtYmVyQ2xpY2sodmFsdWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubm90aWZ5KEV2ZW50RW51bS5DQUxDVUxBVE9SX0JVVFRPTl9DTElDS0VELCB7dmFsdWU6IHZhbHVlfSk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uQ2FsY3VsYXRvclNwZWNpYWxGdW5jdGlvbkNsaWNrKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9TUEVDSUFMX0ZVTkNUSU9OX0NMSUNLRUQsIHt2YWx1ZTogdmFsdWV9KTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgb25DYW5jZWxCdXR0b25DbGljaygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9DQU5DRUxfQ0xJQ0tFRCk7XHJcbiAgICB9XHJcbiAgICBwcml2YXRlIG9uRXF1YWxCdXR0b25DbGljaygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9FUVVBTF9DTElDS0VEKTtcclxuICAgIH1cclxuICAgIHByaXZhdGUgZ2V0RGlzcGxheSgpOiBIVE1MRGl2RWxlbWVudCB7XHJcbiAgICAgICAgaWYgKHRoaXMuZGlzcGxheSkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5kaXNwbGF5O1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignQ2FsY3VsYXRvciBkaXNwbGF5IGVsZW1lbnQgbm90IGZvdW5kJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHJpdmF0ZSBnZXRMYXN0T3BlcmF0aW9uKCk6IEhUTUxQYXJhZ3JhcGhFbGVtZW50IHtcclxuICAgICAgICBpZiAodGhpcy5sYXN0T3BlcmF0aW9uVGV4dCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5sYXN0T3BlcmF0aW9uVGV4dDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NhbGN1bGF0b3IgbGFzdCBvcGVyYXRpb24gZWxlbWVudCBub3QgZm91bmQnKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval('/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return CalculatorModel; });\n/* harmony import */ var _core_observer__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _enums_event_enums__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);\n/* harmony import */ var _helpers_unicode_value__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(4);\n\r\n\r\n\r\nconst DEFAULT_DISPLAY = \'0\';\r\nconst DEFAULT_VALUE = 0;\r\nclass CalculatorModel extends _core_observer__WEBPACK_IMPORTED_MODULE_0__[/* Observer */ "a"] {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.visibleText = DEFAULT_DISPLAY;\r\n        this.partialResult = DEFAULT_DISPLAY;\r\n        this.result = DEFAULT_VALUE;\r\n    }\r\n    updateOperations(value) {\r\n        if (DEFAULT_DISPLAY === this.visibleText) {\r\n            this.visibleText = value;\r\n            this.partialResult = Object(_helpers_unicode_value__WEBPACK_IMPORTED_MODULE_2__[/* unicodeToValue */ "a"])(value);\r\n        }\r\n        else {\r\n            this.visibleText += value;\r\n            this.partialResult += Object(_helpers_unicode_value__WEBPACK_IMPORTED_MODULE_2__[/* unicodeToValue */ "a"])(value);\r\n        }\r\n        this.notify(_enums_event_enums__WEBPACK_IMPORTED_MODULE_1__[/* EventEnum */ "a"].CALCULATOR_MODEL_UPDATED, { value: value });\r\n        return this;\r\n    }\r\n    getVisibleDisplay() {\r\n        return this.visibleText;\r\n    }\r\n    getResult() {\r\n        return this.result;\r\n    }\r\n    forceSetResult(result) {\r\n        this.result = result;\r\n        this.notify(_enums_event_enums__WEBPACK_IMPORTED_MODULE_1__[/* EventEnum */ "a"].CALCULATOR_MODEL_SCORE_CALCULATED);\r\n    }\r\n    reset(silent = false) {\r\n        this.visibleText = DEFAULT_DISPLAY;\r\n        this.partialResult = DEFAULT_DISPLAY;\r\n        this.result = DEFAULT_VALUE;\r\n        if (!silent) {\r\n            this.notify(_enums_event_enums__WEBPACK_IMPORTED_MODULE_1__[/* EventEnum */ "a"].CALCULATOR_MODEL_RESET);\r\n        }\r\n    }\r\n    getPartialResult() {\r\n        return this.partialResult;\r\n    }\r\n    setPartialResult(partialResult) {\r\n        this.partialResult = partialResult;\r\n    }\r\n    calculateScore() {\r\n        const lastCalculation = this.visibleText;\r\n        try {\r\n            this.result = eval(this.partialResult); //TODO get rid of eval\r\n            this.visibleText = this.result.toString();\r\n        }\r\n        catch (e) {\r\n            this.result = NaN;\r\n        }\r\n        this.notify(_enums_event_enums__WEBPACK_IMPORTED_MODULE_1__[/* EventEnum */ "a"].CALCULATOR_MODEL_SCORE_CALCULATED, {\r\n            text: lastCalculation,\r\n            result: this.result\r\n        });\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvbW9kZWwvY2FsY3VsYXRvcl9tb2RlbC50cz8yMTU3Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7QUFBMEM7QUFDSztBQUNTO0FBVXhELE1BQU0sZUFBZSxHQUFXLEdBQUcsQ0FBQztBQUNwQyxNQUFNLGFBQWEsR0FBVyxDQUFDLENBQUM7QUFFMUIscUJBQXVCLFNBQVEsK0RBQVE7SUFBN0M7O1FBQ1ksZ0JBQVcsR0FBVyxlQUFlLENBQUM7UUFDdEMsa0JBQWEsR0FBVyxlQUFlLENBQUM7UUFDeEMsV0FBTSxHQUFXLGFBQWEsQ0FBQztJQXFEM0MsQ0FBQztJQW5EVSxnQkFBZ0IsQ0FBQyxLQUFhO1FBRWpDLElBQUksZUFBZSxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDdEMsSUFBSSxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUM7WUFDekIsSUFBSSxDQUFDLGFBQWEsR0FBRyxxRkFBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1NBQzlDO2FBQU07WUFDSCxJQUFJLENBQUMsV0FBVyxJQUFJLEtBQUssQ0FBQztZQUMxQixJQUFJLENBQUMsYUFBYSxJQUFJLHFGQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7U0FDL0M7UUFFRCxJQUFJLENBQUMsTUFBTSxDQUFDLG9FQUFTLENBQUMsd0JBQXdCLEVBQUUsRUFBQyxLQUFLLEVBQUUsS0FBSyxFQUFDLENBQUMsQ0FBQztRQUNoRSxPQUFPLElBQUksQ0FBQztJQUNoQixDQUFDO0lBQ00saUJBQWlCO1FBQ3BCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QixDQUFDO0lBQ00sU0FBUztRQUNaLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUN2QixDQUFDO0lBQ00sY0FBYyxDQUFDLE1BQWM7UUFDaEMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxvRUFBUyxDQUFDLGlDQUFpQyxDQUFDLENBQUM7SUFDN0QsQ0FBQztJQUNNLEtBQUssQ0FBQyxTQUFrQixLQUFLO1FBQ2hDLElBQUksQ0FBQyxXQUFXLEdBQUcsZUFBZSxDQUFDO1FBQ25DLElBQUksQ0FBQyxhQUFhLEdBQUcsZUFBZSxDQUFDO1FBQ3JDLElBQUksQ0FBQyxNQUFNLEdBQUcsYUFBYSxDQUFDO1FBQzVCLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLG9FQUFTLENBQUMsc0JBQXNCLENBQUMsQ0FBQztTQUNqRDtJQUNMLENBQUM7SUFDTSxnQkFBZ0I7UUFDbkIsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO0lBQzlCLENBQUM7SUFDTSxnQkFBZ0IsQ0FBQyxhQUFxQjtRQUN6QyxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQztJQUN2QyxDQUFDO0lBQ00sY0FBYztRQUNqQixNQUFNLGVBQWUsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3pDLElBQUk7WUFDQSxJQUFJLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLENBQUMsQ0FBQyxzQkFBc0I7WUFDOUQsSUFBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxDQUFDO1NBQzdDO1FBQUMsT0FBTyxDQUFDLEVBQUU7WUFDUixJQUFJLENBQUMsTUFBTSxHQUFHLEdBQUcsQ0FBQztTQUNyQjtRQUVELElBQUksQ0FBQyxNQUFNLENBQUMsb0VBQVMsQ0FBQyxpQ0FBaUMsRUFBRTtZQUNyRCxJQUFJLEVBQUUsZUFBZTtZQUNyQixNQUFNLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDdEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUNKIiwiZmlsZSI6IjYuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge09ic2VydmVyfSBmcm9tICcuLi9jb3JlL29ic2VydmVyJztcclxuaW1wb3J0IHtFdmVudEVudW19IGZyb20gJy4uL2VudW1zL2V2ZW50X2VudW1zJztcclxuaW1wb3J0IHt1bmljb2RlVG9WYWx1ZX0gZnJvbSAnLi4vaGVscGVycy91bmljb2RlX3ZhbHVlJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1vZGVsQ2FsY3VsYXRpb25SZXN1bHQge1xyXG4gICAgdGV4dDogc3RyaW5nLFxyXG4gICAgcmVzdWx0OiBudW1iZXJcclxufVxyXG5leHBvcnQgaW50ZXJmYWNlIElNb2RlbENhbGN1bGF0aW9uUGFydGlhbERpc3BsYXkge1xyXG4gICAgdmFsdWU6IHN0cmluZ1xyXG59XHJcblxyXG5jb25zdCBERUZBVUxUX0RJU1BMQVk6IHN0cmluZyA9ICcwJztcclxuY29uc3QgREVGQVVMVF9WQUxVRTogbnVtYmVyID0gMDtcclxuXHJcbmV4cG9ydCBjbGFzcyBDYWxjdWxhdG9yTW9kZWwgZXh0ZW5kcyBPYnNlcnZlciB7XHJcbiAgICBwcml2YXRlIHZpc2libGVUZXh0OiBzdHJpbmcgPSBERUZBVUxUX0RJU1BMQVk7XHJcbiAgICBwcml2YXRlIHBhcnRpYWxSZXN1bHQ6IHN0cmluZyA9IERFRkFVTFRfRElTUExBWTtcclxuICAgIHByaXZhdGUgcmVzdWx0OiBudW1iZXIgPSBERUZBVUxUX1ZBTFVFO1xyXG5cclxuICAgIHB1YmxpYyB1cGRhdGVPcGVyYXRpb25zKHZhbHVlOiBzdHJpbmcpOiBDYWxjdWxhdG9yTW9kZWwge1xyXG5cclxuICAgICAgICBpZiAoREVGQVVMVF9ESVNQTEFZID09PSB0aGlzLnZpc2libGVUZXh0KSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVRleHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgdGhpcy5wYXJ0aWFsUmVzdWx0ID0gdW5pY29kZVRvVmFsdWUodmFsdWUpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVRleHQgKz0gdmFsdWU7XHJcbiAgICAgICAgICAgIHRoaXMucGFydGlhbFJlc3VsdCArPSB1bmljb2RlVG9WYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9VUERBVEVELCB7dmFsdWU6IHZhbHVlfSk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZ2V0VmlzaWJsZURpc3BsYXkoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52aXNpYmxlVGV4dDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBnZXRSZXN1bHQoKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHQ7XHJcbiAgICB9XHJcbiAgICBwdWJsaWMgZm9yY2VTZXRSZXN1bHQocmVzdWx0OiBudW1iZXIpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnJlc3VsdCA9IHJlc3VsdDtcclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9TQ09SRV9DQUxDVUxBVEVEKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyByZXNldChzaWxlbnQ6IGJvb2xlYW4gPSBmYWxzZSkge1xyXG4gICAgICAgIHRoaXMudmlzaWJsZVRleHQgPSBERUZBVUxUX0RJU1BMQVk7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWFsUmVzdWx0ID0gREVGQVVMVF9ESVNQTEFZO1xyXG4gICAgICAgIHRoaXMucmVzdWx0ID0gREVGQVVMVF9WQUxVRTtcclxuICAgICAgICBpZiAoIXNpbGVudCkge1xyXG4gICAgICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9SRVNFVCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcHVibGljIGdldFBhcnRpYWxSZXN1bHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5wYXJ0aWFsUmVzdWx0O1xyXG4gICAgfVxyXG4gICAgcHVibGljIHNldFBhcnRpYWxSZXN1bHQocGFydGlhbFJlc3VsdDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5wYXJ0aWFsUmVzdWx0ID0gcGFydGlhbFJlc3VsdDtcclxuICAgIH1cclxuICAgIHB1YmxpYyBjYWxjdWxhdGVTY29yZSgpIHtcclxuICAgICAgICBjb25zdCBsYXN0Q2FsY3VsYXRpb24gPSB0aGlzLnZpc2libGVUZXh0O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVzdWx0ID0gZXZhbCh0aGlzLnBhcnRpYWxSZXN1bHQpOyAvL1RPRE8gZ2V0IHJpZCBvZiBldmFsXHJcbiAgICAgICAgICAgIHRoaXMudmlzaWJsZVRleHQgPSB0aGlzLnJlc3VsdC50b1N0cmluZygpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZXN1bHQgPSBOYU47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLm5vdGlmeShFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9TQ09SRV9DQUxDVUxBVEVELCB7XHJcbiAgICAgICAgICAgIHRleHQ6IGxhc3RDYWxjdWxhdGlvbixcclxuICAgICAgICAgICAgcmVzdWx0OiB0aGlzLnJlc3VsdFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///6\n')},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CalculatorController; });\n/* harmony import */ var _views_calculator_view__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(5);\n/* harmony import */ var _core_observer__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(2);\n/* harmony import */ var _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(0);\n/* harmony import */ var _model_calculator_model__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6);\n/* harmony import */ var _enums_special_functions__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(1);\n/* harmony import */ var _helpers_calculation_helper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(3);\n\r\n\r\n\r\n\r\n\r\n\r\nclass CalculatorController extends _core_observer__WEBPACK_IMPORTED_MODULE_1__[/* Observer */ \"a\"] {\r\n    constructor() {\r\n        super();\r\n        this.expectedSecondArgument = false;\r\n        this.specialFunctionOpened = [];\r\n        this.subscriptOpen = 0;\r\n        this.superscriptOpen = 0;\r\n        this.view = new _views_calculator_view__WEBPACK_IMPORTED_MODULE_0__[/* CalculatorView */ \"a\"]();\r\n        this.model = new _model_calculator_model__WEBPACK_IMPORTED_MODULE_3__[/* CalculatorModel */ \"a\"]();\r\n        this.attachEvents();\r\n    }\r\n    attachEvents() {\r\n        this.view.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_BUTTON_CLICKED, this.onCalcButtonClick.bind(this));\r\n        this.view.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_CANCEL_CLICKED, this.onCalcCancelButtonClick.bind(this));\r\n        this.view.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_EQUAL_CLICKED, this.onEqualButtonClick.bind(this));\r\n        this.view.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_SPECIAL_FUNCTION_CLICKED, this.onSpecialFunctionButtonClick.bind(this));\r\n        this.model.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_MODEL_UPDATED, this.onCalcOperationsModelUpdated.bind(this));\r\n        this.model.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_MODEL_SCORE_CALCULATED, this.onCalcModelScoreCalculated.bind(this));\r\n        this.model.on(this, _enums_event_enums__WEBPACK_IMPORTED_MODULE_2__[/* EventEnum */ \"a\"].CALCULATOR_MODEL_RESET, this.onCalcModelReset.bind(this));\r\n    }\r\n    onCalcButtonClick(data) {\r\n        this.model.updateOperations(data.value);\r\n    }\r\n    onCalcCancelButtonClick() {\r\n        this.view.resetLastOperation();\r\n        this.view.resetSubSupCount();\r\n        this.model.reset();\r\n    }\r\n    onEqualButtonClick() {\r\n        this.model.calculateScore();\r\n    }\r\n    onCalcModelReset() {\r\n        this.view.resetDisplay();\r\n    }\r\n    onSpecialFunctionButtonClick(data) {\r\n        switch (data.value) {\r\n            case '(':\r\n                this.specialFunctionOpened.push(data.value);\r\n                this.model.updateOperations(data.value);\r\n                break;\r\n            case ')':\r\n                if ('second_argument' === this.specialFunctionOpened[this.specialFunctionOpened.length - 1]) {\r\n                    this.specialFunctionOpened.pop();\r\n                    if (this.subscriptOpen > 0) {\r\n                        this.model.updateOperations(')');\r\n                        this.view.stopSubscript();\r\n                        this.model.updateOperations('(');\r\n                        this.subscriptOpen--;\r\n                    }\r\n                }\r\n                else if (this.specialFunctionOpened.length > 0) {\r\n                    this.model.updateOperations(data.value);\r\n                    this.performPartialCalculation(this.specialFunctionOpened.pop());\r\n                    if (this.superscriptOpen > 0) {\r\n                        this.view.stopSuperscript();\r\n                        this.superscriptOpen--;\r\n                    }\r\n                }\r\n                break;\r\n            case '!':\r\n                this.specialFunctionOpened.push(data.value);\r\n                this.model.updateOperations(`${data.value}`);\r\n                this.performPartialCalculation(this.specialFunctionOpened.pop());\r\n                break;\r\n            case 'log':\r\n                if (this.subscriptOpen < 2) {\r\n                    this.specialFunctionOpened.push(data.value);\r\n                    this.specialFunctionOpened.push('second_argument');\r\n                    this.model.updateOperations(`${data.value}`);\r\n                    this.view.startSubscript();\r\n                    this.subscriptOpen++;\r\n                    this.model.updateOperations('(');\r\n                }\r\n                break;\r\n            case '^':\r\n                if (this.superscriptOpen < 2) {\r\n                    this.specialFunctionOpened.push(data.value);\r\n                    this.superscriptOpen++;\r\n                    this.view.startSuperscript();\r\n                    this.model.updateOperations(`${data.value}(`);\r\n                }\r\n                break;\r\n            default:\r\n                this.specialFunctionOpened.push(data.value);\r\n                this.model.updateOperations(`${data.value}(`);\r\n        }\r\n    }\r\n    onCalcOperationsModelUpdated(data) {\r\n        const filteredValue = data.value.replace(/[\\^]/g, function (match) {\r\n            return '';\r\n        });\r\n        this.view.addToDisplay(filteredValue);\r\n    }\r\n    performPartialCalculation(value) {\r\n        const modelPartialResult = this.model.getPartialResult();\r\n        const lastFunctionOccurence = modelPartialResult.lastIndexOf(value);\r\n        const lastClosingBracketOccurence = modelPartialResult.lastIndexOf(')');\r\n        let partialResultToEval = modelPartialResult.substring(lastFunctionOccurence, lastClosingBracketOccurence + 1);\r\n        let evaluatedPartialResult;\r\n        let bracketsContent;\r\n        if ('(' === value) {\r\n            evaluatedPartialResult = eval(partialResultToEval);\r\n        }\r\n        else {\r\n            bracketsContent = partialResultToEval.substring(partialResultToEval.indexOf('(') + 1, partialResultToEval.indexOf(')'));\r\n            if ('^' === value) {\r\n                const powerCalculationResult = _helpers_calculation_helper__WEBPACK_IMPORTED_MODULE_5__[/* calculatePower */ \"c\"](modelPartialResult);\r\n                evaluatedPartialResult = powerCalculationResult.value;\r\n                partialResultToEval = modelPartialResult.substring(powerCalculationResult.index + 1, lastClosingBracketOccurence + 1);\r\n            }\r\n            else if ('log' === value) {\r\n                evaluatedPartialResult = _helpers_calculation_helper__WEBPACK_IMPORTED_MODULE_5__[/* calculateLogarithm */ \"b\"](modelPartialResult);\r\n            }\r\n            else if ('!' === value) {\r\n                const factorialCalculationResult = _helpers_calculation_helper__WEBPACK_IMPORTED_MODULE_5__[/* calculateFactorial */ \"a\"](modelPartialResult);\r\n                evaluatedPartialResult = factorialCalculationResult.value;\r\n                partialResultToEval = modelPartialResult.substring(factorialCalculationResult.index + 1, lastFunctionOccurence + 1);\r\n            }\r\n            else {\r\n                evaluatedPartialResult = _enums_special_functions__WEBPACK_IMPORTED_MODULE_4__[/* specialFunctionFromMath */ \"a\"][value](eval(bracketsContent));\r\n            }\r\n        }\r\n        if (isNaN(evaluatedPartialResult)) {\r\n            this.model.forceSetResult(NaN);\r\n        }\r\n        else {\r\n            this.model.setPartialResult(modelPartialResult.replace(partialResultToEval, evaluatedPartialResult.toString()));\r\n        }\r\n    }\r\n    onCalcModelScoreCalculated(data) {\r\n        const { result } = data;\r\n        if (isNaN(result)) {\r\n            this.model.reset();\r\n            this.view.updateDisplay('Syntax error');\r\n        }\r\n        else {\r\n            this.view.updateLastOperation();\r\n            this.view.updateDisplay(result.toString());\r\n        }\r\n    }\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29udHJvbGxlci9jYWxjdWxhdG9yX2NvbnRyb2xsZXIudHM/MmI5MiJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQXdEO0FBQ2Q7QUFDSztBQUNxRTtBQUVqRDtBQUNBO0FBRTdELDBCQUE0QixTQUFRLCtEQUFRO0lBUTlDO1FBQ0ksS0FBSyxFQUFFLENBQUM7UUFOSiwyQkFBc0IsR0FBWSxLQUFLLENBQUM7UUFDeEMsMEJBQXFCLEdBQWEsRUFBRSxDQUFDO1FBQ3JDLGtCQUFhLEdBQVcsQ0FBQyxDQUFDO1FBQzFCLG9CQUFlLEdBQVcsQ0FBQyxDQUFDO1FBS2hDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSw2RUFBYyxFQUFFLENBQUM7UUFDakMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLCtFQUFlLEVBQUUsQ0FBQztRQUNuQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDeEIsQ0FBQztJQUNELFlBQVk7UUFDUixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsb0VBQVMsQ0FBQyx5QkFBeUIsRUFBRSxJQUFJLENBQUMsaUJBQWlCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7UUFDM0YsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsSUFBSSxFQUFFLG9FQUFTLENBQUMseUJBQXlCLEVBQUUsSUFBSSxDQUFDLHVCQUF1QixDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1FBQ2pHLElBQUksQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLElBQUksRUFBRSxvRUFBUyxDQUFDLHdCQUF3QixFQUFFLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUMzRixJQUFJLENBQUMsSUFBSSxDQUFDLEVBQUUsQ0FBQyxJQUFJLEVBQUUsb0VBQVMsQ0FBQyxtQ0FBbUMsRUFBRSxJQUFJLENBQUMsNEJB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SUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLEVBQUUsQ0FBQztZQUNuQixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQztTQUMzQzthQUFNO1lBQ0gsSUFBSSxDQUFDLElBQUksQ0FBQyxtQkFBbUIsRUFBRSxDQUFDO1lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsQ0FBQyxDQUFDO1NBQzlDO0lBQ0wsQ0FBQztDQUNKIiwiZmlsZSI6IjcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NhbGN1bGF0b3JWaWV3fSBmcm9tICcuLi92aWV3cy9jYWxjdWxhdG9yX3ZpZXcnO1xyXG5pbXBvcnQge09ic2VydmVyfSBmcm9tICcuLi9jb3JlL29ic2VydmVyJztcclxuaW1wb3J0IHtFdmVudEVudW19IGZyb20gXCIuLi9lbnVtcy9ldmVudF9lbnVtc1wiO1xyXG5pbXBvcnQge0NhbGN1bGF0b3JNb2RlbCwgSU1vZGVsQ2FsY3VsYXRpb25QYXJ0aWFsRGlzcGxheSwgSU1vZGVsQ2FsY3VsYXRpb25SZXN1bHR9IGZyb20gJy4uL21vZGVsL2NhbGN1bGF0b3JfbW9kZWwnO1xyXG5pbXBvcnQge0J1dHRvbkVudW19IGZyb20gXCIuLi9lbnVtcy9idXR0b25fZW51bXNcIjtcclxuaW1wb3J0IHtzcGVjaWFsRnVuY3Rpb25Gcm9tTWF0aH0gZnJvbSAnLi4vZW51bXMvc3BlY2lhbF9mdW5jdGlvbnMnO1xyXG5pbXBvcnQgKiBhcyBjYWxjdWxhdGlvbkhlbHBlciBmcm9tICcuLi9oZWxwZXJzL2NhbGN1bGF0aW9uX2hlbHBlcic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2FsY3VsYXRvckNvbnRyb2xsZXIgZXh0ZW5kcyBPYnNlcnZlcntcclxuICAgIHByaXZhdGUgdmlldzogQ2FsY3VsYXRvclZpZXc7XHJcbiAgICBwcml2YXRlIG1vZGVsOiBDYWxjdWxhdG9yTW9kZWw7XHJcbiAgICBwcml2YXRlIGV4cGVjdGVkU2Vjb25kQXJndW1lbnQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuICAgIHByaXZhdGUgc3BlY2lhbEZ1bmN0aW9uT3BlbmVkOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgcHJpdmF0ZSBzdWJzY3JpcHRPcGVuOiBudW1iZXIgPSAwO1xyXG4gICAgcHJpdmF0ZSBzdXBlcnNjcmlwdE9wZW46IG51bWJlciA9IDA7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuXHJcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IENhbGN1bGF0b3JWaWV3KCk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG5ldyBDYWxjdWxhdG9yTW9kZWwoKTtcclxuICAgICAgICB0aGlzLmF0dGFjaEV2ZW50cygpO1xyXG4gICAgfVxyXG4gICAgYXR0YWNoRXZlbnRzKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmlldy5vbih0aGlzLCBFdmVudEVudW0uQ0FMQ1VMQVRPUl9CVVRUT05fQ0xJQ0tFRCwgdGhpcy5vbkNhbGNCdXR0b25DbGljay5iaW5kKHRoaXMpKTtcclxuICAgICAgICB0aGlzLnZpZXcub24odGhpcywgRXZlbnRFbnVtLkNBTENVTEFUT1JfQ0FOQ0VMX0NMSUNLRUQsIHRoaXMub25DYWxjQ2FuY2VsQnV0dG9uQ2xpY2suYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy52aWV3Lm9uKHRoaXMsIEV2ZW50RW51bS5DQUxDVUxBVE9SX0VRVUFMX0NMSUNLRUQsIHRoaXMub25FcXVhbEJ1dHRvbkNsaWNrLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMudmlldy5vbih0aGlzLCBFdmVudEVudW0uQ0FMQ1VMQVRPUl9TUEVDSUFMX0ZVTkNUSU9OX0NMSUNLRUQsIHRoaXMub25TcGVjaWFsRnVuY3Rpb25CdXR0b25DbGljay5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgdGhpcy5tb2RlbC5vbih0aGlzLCBFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9VUERBVEVELCB0aGlzLm9uQ2FsY09wZXJhdGlvbnNNb2RlbFVwZGF0ZWQuYmluZCh0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5tb2RlbC5vbih0aGlzLCBFdmVudEVudW0uQ0FMQ1VMQVRPUl9NT0RFTF9TQ09SRV9DQUxDVUxBVEVELCB0aGlzLm9uQ2FsY01vZGVsU2NvcmVDYWxjdWxhdGVkLmJpbmQodGhpcykpO1xyXG4gICAgICAgIHRoaXMubW9kZWwub24odGhpcywgRXZlbnRFbnVtLkNBTENVTEFUT1JfTU9ERUxfUkVTRVQsIHRoaXMub25DYWxjTW9kZWxSZXNldC5iaW5kKHRoaXMpKTtcclxuICAgIH1cclxuICAgIG9uQ2FsY0J1dHRvbkNsaWNrKGRhdGE6IHt2YWx1ZTogc3RyaW5nfSk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMubW9kZWwudXBkYXRlT3BlcmF0aW9ucyhkYXRhLnZhbHVlKTtcclxuICAgIH1cclxuICAgIG9uQ2FsY0NhbmNlbEJ1dHRvbkNsaWNrKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmlldy5yZXNldExhc3RPcGVyYXRpb24oKTtcclxuICAgICAgICB0aGlzLnZpZXcucmVzZXRTdWJTdXBDb3VudCgpO1xyXG4gICAgICAgIHRoaXMubW9kZWwucmVzZXQoKTtcclxuICAgIH1cclxuICAgIG9uRXF1YWxCdXR0b25DbGljaygpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLm1vZGVsLmNhbGN1bGF0ZVNjb3JlKCk7XHJcbiAgICB9XHJcbiAgICBvbkNhbGNNb2RlbFJlc2V0KCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMudmlldy5yZXNldERpc3BsYXkoKTtcclxuICAgIH1cclxuICAgIG9uU3BlY2lhbEZ1bmN0aW9uQnV0dG9uQ2xpY2soZGF0YToge3ZhbHVlOiBzdHJpbmd9KTogdm9pZCB7XHJcbiAgICAgICAgc3dpdGNoIChkYXRhLnZhbHVlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJygnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQucHVzaChkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwudXBkYXRlT3BlcmF0aW9ucyhkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICcpJzpcclxuICAgICAgICAgICAgICAgIGlmICgnc2Vjb25kX2FyZ3VtZW50JyA9PT0gdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWRbdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQubGVuZ3RoIC0gMV0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNwZWNpYWxGdW5jdGlvbk9wZW5lZC5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRPcGVuID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1vZGVsLnVwZGF0ZU9wZXJhdGlvbnMoJyknKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnN0b3BTdWJzY3JpcHQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVPcGVyYXRpb25zKCcoJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3Vic2NyaXB0T3Blbi0tO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW9kZWwudXBkYXRlT3BlcmF0aW9ucyhkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBlcmZvcm1QYXJ0aWFsQ2FsY3VsYXRpb24oPHN0cmluZz50aGlzLnNwZWNpYWxGdW5jdGlvbk9wZW5lZC5wb3AoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3VwZXJzY3JpcHRPcGVuID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnZpZXcuc3RvcFN1cGVyc2NyaXB0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3VwZXJzY3JpcHRPcGVuLS07XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJyEnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQucHVzaChkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubW9kZWwudXBkYXRlT3BlcmF0aW9ucyhgJHtkYXRhLnZhbHVlfWApO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wZXJmb3JtUGFydGlhbENhbGN1bGF0aW9uKDxzdHJpbmc+dGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQucG9wKCkpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2xvZyc6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdWJzY3JpcHRPcGVuIDwgMikge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc3BlY2lhbEZ1bmN0aW9uT3BlbmVkLnB1c2goZGF0YS52YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQucHVzaCgnc2Vjb25kX2FyZ3VtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVPcGVyYXRpb25zKGAke2RhdGEudmFsdWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy52aWV3LnN0YXJ0U3Vic2NyaXB0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zdWJzY3JpcHRPcGVuKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVPcGVyYXRpb25zKCcoJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnXic6XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5zdXBlcnNjcmlwdE9wZW4gPCAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGVjaWFsRnVuY3Rpb25PcGVuZWQucHVzaChkYXRhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnN1cGVyc2NyaXB0T3BlbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmlldy5zdGFydFN1cGVyc2NyaXB0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVPcGVyYXRpb25zKGAke2RhdGEudmFsdWV9KGApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNwZWNpYWxGdW5jdGlvbk9wZW5lZC5wdXNoKGRhdGEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tb2RlbC51cGRhdGVPcGVyYXRpb25zKGAke2RhdGEudmFsdWV9KGApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9uQ2FsY09wZXJhdGlvbnNNb2RlbFVwZGF0ZWQoZGF0YTogSU1vZGVsQ2FsY3VsYXRpb25QYXJ0aWFsRGlzcGxheSk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGZpbHRlcmVkVmFsdWUgPSBkYXRhLnZhbHVlLnJlcGxhY2UoL1tcXF5dL2csIGZ1bmN0aW9uIChtYXRjaCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy52aWV3LmFkZFRvRGlzcGxheShmaWx0ZXJlZFZhbHVlKTtcclxuICAgIH1cclxuICAgIHB1YmxpYyBwZXJmb3JtUGFydGlhbENhbGN1bGF0aW9uKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCBtb2RlbFBhcnRpYWxSZXN1bHQ6IHN0cmluZyA9IHRoaXMubW9kZWwuZ2V0UGFydGlhbFJlc3VsdCgpO1xyXG4gICAgICAgIGNvbnN0IGxhc3RGdW5jdGlvbk9jY3VyZW5jZTogbnVtYmVyID0gbW9kZWxQYXJ0aWFsUmVzdWx0Lmxhc3RJbmRleE9mKHZhbHVlKTtcclxuICAgICAgICBjb25zdCBsYXN0Q2xvc2luZ0JyYWNrZXRPY2N1cmVuY2U6IG51bWJlciA9IG1vZGVsUGFydGlhbFJlc3VsdC5sYXN0SW5kZXhPZignKScpO1xyXG4gICAgICAgIGxldCBwYXJ0aWFsUmVzdWx0VG9FdmFsOiBzdHJpbmcgPSBtb2RlbFBhcnRpYWxSZXN1bHQuc3Vic3RyaW5nKGxhc3RGdW5jdGlvbk9jY3VyZW5jZSwgbGFzdENsb3NpbmdCcmFja2V0T2NjdXJlbmNlICsgMSk7XHJcbiAgICAgICAgbGV0IGV2YWx1YXRlZFBhcnRpYWxSZXN1bHQ6IG51bWJlcjtcclxuICAgICAgICBsZXQgYnJhY2tldHNDb250ZW50OiBzdHJpbmc7XHJcblxyXG4gICAgICAgIGlmICgnKCcgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGV2YWx1YXRlZFBhcnRpYWxSZXN1bHQgPSBldmFsKHBhcnRpYWxSZXN1bHRUb0V2YWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJyYWNrZXRzQ29udGVudCA9IHBhcnRpYWxSZXN1bHRUb0V2YWwuc3Vic3RyaW5nKFxyXG4gICAgICAgICAgICAgICAgcGFydGlhbFJlc3VsdFRvRXZhbC5pbmRleE9mKCcoJykgKyAxLFxyXG4gICAgICAgICAgICAgICAgcGFydGlhbFJlc3VsdFRvRXZhbC5pbmRleE9mKCcpJylcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgaWYgKCdeJyA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHBvd2VyQ2FsY3VsYXRpb25SZXN1bHQgPSBjYWxjdWxhdGlvbkhlbHBlci5jYWxjdWxhdGVQb3dlcihtb2RlbFBhcnRpYWxSZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2YWx1YXRlZFBhcnRpYWxSZXN1bHQgPSBwb3dlckNhbGN1bGF0aW9uUmVzdWx0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcGFydGlhbFJlc3VsdFRvRXZhbCA9IG1vZGVsUGFydGlhbFJlc3VsdC5zdWJzdHJpbmcoXHJcbiAgICAgICAgICAgICAgICAgICAgcG93ZXJDYWxjdWxhdGlvblJlc3VsdC5pbmRleCArIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgbGFzdENsb3NpbmdCcmFja2V0T2NjdXJlbmNlICsgMVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgnbG9nJyA9PT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGV2YWx1YXRlZFBhcnRpYWxSZXN1bHQgPSBjYWxjdWxhdGlvbkhlbHBlci5jYWxjdWxhdGVMb2dhcml0aG0obW9kZWxQYXJ0aWFsUmVzdWx0KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICgnIScgPT09IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmYWN0b3JpYWxDYWxjdWxhdGlvblJlc3VsdCA9IGNhbGN1bGF0aW9uSGVscGVyLmNhbGN1bGF0ZUZhY3RvcmlhbChtb2RlbFBhcnRpYWxSZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgICAgIGV2YWx1YXRlZFBhcnRpYWxSZXN1bHQgPSBmYWN0b3JpYWxDYWxjdWxhdGlvblJlc3VsdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxSZXN1bHRUb0V2YWwgPSBtb2RlbFBhcnRpYWxSZXN1bHQuc3Vic3RyaW5nKFxyXG4gICAgICAgICAgICAgICAgICAgIGZhY3RvcmlhbENhbGN1bGF0aW9uUmVzdWx0LmluZGV4ICsgMSxcclxuICAgICAgICAgICAgICAgICAgICBsYXN0RnVuY3Rpb25PY2N1cmVuY2UgKyAxXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZXZhbHVhdGVkUGFydGlhbFJlc3VsdCA9IHNwZWNpYWxGdW5jdGlvbkZyb21NYXRoW3ZhbHVlXShldmFsKGJyYWNrZXRzQ29udGVudCkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoaXNOYU4oZXZhbHVhdGVkUGFydGlhbFJlc3VsdCkpIHtcclxuICAgICAgICAgICAgdGhpcy5tb2RlbC5mb3JjZVNldFJlc3VsdChOYU4pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubW9kZWwuc2V0UGFydGlhbFJlc3VsdChtb2RlbFBhcnRpYWxSZXN1bHQucmVwbGFjZShcclxuICAgICAgICAgICAgICAgIHBhcnRpYWxSZXN1bHRUb0V2YWwsXHJcbiAgICAgICAgICAgICAgICBldmFsdWF0ZWRQYXJ0aWFsUmVzdWx0LnRvU3RyaW5nKClcclxuICAgICAgICAgICAgKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgb25DYWxjTW9kZWxTY29yZUNhbGN1bGF0ZWQoZGF0YTogSU1vZGVsQ2FsY3VsYXRpb25SZXN1bHQpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7XHJcbiAgICAgICAgICAgIHJlc3VsdFxyXG4gICAgICAgIH0gPSBkYXRhO1xyXG5cclxuICAgICAgICBpZiAoaXNOYU4ocmVzdWx0KSkge1xyXG4gICAgICAgICAgICB0aGlzLm1vZGVsLnJlc2V0KCk7XHJcbiAgICAgICAgICAgIHRoaXMudmlldy51cGRhdGVEaXNwbGF5KCdTeW50YXggZXJyb3InKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlTGFzdE9wZXJhdGlvbigpO1xyXG4gICAgICAgICAgICB0aGlzLnZpZXcudXBkYXRlRGlzcGxheShyZXN1bHQudG9TdHJpbmcoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///7\n")},function(module,__webpack_exports__,__webpack_require__){"use strict";eval("__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./src/ts/controller/calculator_controller.ts\nvar calculator_controller = __webpack_require__(7);\n\n// CONCATENATED MODULE: ./src/ts/controller/main_controller.ts\n\r\nclass main_controller_MainController {\r\n    constructor() {\r\n        this.calculatorController = new calculator_controller[\"a\" /* CalculatorController */]();\r\n    }\r\n}\r\n\n// CONCATENATED MODULE: ./src/ts/entry.ts\n\r\n(function () {\r\n    window.addEventListener('load', function () {\r\n        new main_controller_MainController();\r\n    });\r\n})();\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi9zcmMvdHMvY29udHJvbGxlci9tYWluX2NvbnRyb2xsZXIudHM/MGM4YSIsIndlYnBhY2s6Ly8vLi9zcmMvdHMvZW50cnkudHM/M2U4ZCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBNkQ7QUFFdkQ7SUFBTjtRQUNZLHlCQUFvQixHQUF5QixJQUFJLHFEQUFvQixFQUFFLENBQUM7SUFDcEYsQ0FBQztDQUFBOzs7QUNKMkQ7QUFFNUQsQ0FBQztJQUNHLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUU7UUFDNUIsSUFBSSw4QkFBYyxFQUFFLENBQUM7SUFDekIsQ0FBQyxDQUFDLENBQUM7QUFDUCxDQUFDLENBQUMsRUFBRSxDQUFDIiwiZmlsZSI6IjguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge0NhbGN1bGF0b3JDb250cm9sbGVyfSBmcm9tIFwiLi9jYWxjdWxhdG9yX2NvbnRyb2xsZXJcIjtcclxuXHJcbmV4cG9ydCBjbGFzcyBNYWluQ29udHJvbGxlciB7XHJcbiAgICBwcml2YXRlIGNhbGN1bGF0b3JDb250cm9sbGVyOiBDYWxjdWxhdG9yQ29udHJvbGxlciA9IG5ldyBDYWxjdWxhdG9yQ29udHJvbGxlcigpO1xyXG59IiwiaW1wb3J0IHtNYWluQ29udHJvbGxlcn0gZnJvbSBcIi4vY29udHJvbGxlci9tYWluX2NvbnRyb2xsZXJcIjtcclxuXHJcbihmdW5jdGlvbiAoKSB7XHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXcgTWFpbkNvbnRyb2xsZXIoKTtcclxuICAgIH0pO1xyXG59KSgpOyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///8\n")}]);